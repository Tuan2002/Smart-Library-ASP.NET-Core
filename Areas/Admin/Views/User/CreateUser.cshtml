@{
    ViewData["Title"] = "Thêm người dùng mới";
}
<div class="container-xl">
    <div class="row text-center">
        <div class="col-lg-12">
            <div class="d-flex align-items-center justify-content-center user-member__title mb-30 mt-30">
                <h4 class="fw-600">Thêm người dùng mới</h4>
            </div>
        </div>
    </div>
    <div class="card p-30">
        <div class="row justify-content-start">
            <form action="#">
                <div class="col-12">
                    <div class="d-flex justify-content-start">
                        <div class="account-profile d-flex align-items-center mb-4 ">
                            <div class="ap-img pro_img_wrapper">
                                <input id="file-upload" type="file" name="fileUpload"
                                    class="d-none upload-avatar-input">
                                <label for="file-upload">
                                    <img class="dm-upload-avatar avatrSrc ap-img__main rounded-circle wh-120 bg-lighter d-flex"
                                        src="/img/svg/upload-image.svg" alt="profile">
                                    <span id="remove_pro_pic">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="svg replaced-svg">
                                            <path
                                                d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z">
                                            </path>
                                            <circle cx="12" cy="13" r="4"></circle>
                                        </svg>
                                    </span>
                                </label>
                            </div>
                            <div class="account-profile__title">
                                <h6 class="fs-18 ms-20 fw-500">Ảnh đại diện</h6>
                            </div>
                        </div>
                    </div>
                    <div class="edit-profile__body">
                        <div class="row d-flex justify-content-start">
                            <div class="col-lg-6 col-sm-12 p-20">
                                <div class="form-group mb-25">
                                    <label for="name2">Địa chỉ E-mail</label>
                                    <input type="email" class="form-control" id="name2" placeholder="Nhập e-mail">
                                </div>
                                <div class="form-group mb-25">
                                    <label for="first-name">Họ</label>
                                    <input type="text" class="form-control" id="first-name"
                                        placeholder="Vui lòng nhập họ và tên lót">
                                </div>
                                <div class="form-group mb-25">
                                    <label for="last-name">Tên</label>
                                    <input type="text" class="form-control" id="last-name"
                                        placeholder="Vui lòng nhập tên">
                                </div>
                                <div class="form-group mb-25 form-group-calender">
                                    <label for="datepicker">Ngày sinh</label>
                                    <div class="dm-date-picker">
                                        <div class="form-group mb-0 form-group-calender position-relative">
                                            <input type="text" class="form-control form-control-lg" id="datepicker"
                                                placeholder="Chọn ngày sinh">
                                            <a><img class="svg" src="/img/svg/calendar.svg" alt="calendar"></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group mb-25">
                                    <label for="phoneNumber5">Số điện thoại</label>
                                    <input type="tel" class="form-control" id="phoneNumber5"
                                        placeholder="Nhập số điện thoại">
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-12 p-20">
                                <div class="form-group mb-25 d-flex justify-content-start gap-20">
                                    <div class="countryOption flex-1">
                                        <label for="countryOption">
                                            Tỉnh/Thành phố
                                        </label>
                                        <div class="dm-select-list">
                                            <div class="dm-select">
                                                <select name="select-search" id="cityOption"
                                                    data-select2-id="cityOption"
                                                    class="form-control js-example-basic-single js-data-example-ajax js-states form-control select2-results__option"
                                                    aria-hidden="true">
                                                    <option data-select2-id="1">Chọn Tỉnh/Thành phố
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="district flex-1">
                                        <label for="district">
                                            Quận/Huyện
                                        </label>
                                        <div class="dm-select-list">
                                            <div class="dm-select">
                                                <select role="select" name="select-search" id="district"
                                                    data-select2-id="district"
                                                    class="form-control js-example-basic-single js-states form-control select2-results__option"
                                                    aria-hidden="true">
                                                    <option data-select2-id="2">Chọn Quận/Huyện</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group mb-25">
                                    <div class="role-option">
                                        <label for="role">
                                            Vai trò người dùng
                                        </label>
                                        <select role="select" name="select-search"
                                            class="js-example-basic-single js-states form-control select2-results__option"
                                            id="role" data-select2-id="role" tabindex="-1" aria-hidden="true">
                                            @await Component.InvokeAsync("RoleOptions")
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group mb-25">
                                    <div class="workspace-option">
                                        <label for="workspace">
                                            Vị trí làm việc
                                        </label>
                                        <select role="select" name="select-search"
                                            class="js-example-basic-single js-states form-control select2-results__option"
                                            id="workspace" data-select2-id="workspace" tabindex="-1" aria-hidden="true">
                                            @await Component.InvokeAsync("WorkspaceOptions")
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="button-group pt-25 d-flex justify-content-center">
                        <button type="submit" class="btn btn-lg btn-primary rounded-pill shadow2">Tạo
                            người dùng
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
@section Create {
    <script>
        const baseURL = "https://provinces.open-api.vn/api";
        function loadProvinces() {
            $.ajax({
                url: `${baseURL}/p/`,
                method: "GET",
                success: function (data) {
                    // Clear the existing options
                    $("#cityOption").empty();
                    // Add the new options from the API response
                    data.forEach(function (province) {
                        $("#cityOption").append(`<option id="${province.code}" value="${province.name}">${province.name}</option>`);
                    });
                    // Initialize the select2 plugin
                    $("#cityOption").select2(
                        {
                            searchInputPlaceholder: "Nhập tên Tỉnh/Thành phố",
                            "language": {
                                "noResults": function () {
                                    return "Không tìm thấy kết quả nào";
                                }
                            },
                        }
                    );
                    const provinceCode = $("#cityOption").children("option:selected").attr("id");
                    loadDistricts(provinceCode);
                },
                error: function (error) {
                    console.error("Error loading provinces:", error);
                }
            });
        }
        function loadDistricts(provinceCode) {
            $.ajax({
                url: `${baseURL}/p/${provinceCode}?depth=2`,
                method: "GET",
                success: function (data) {
                    // Clear the existing options
                    $("#district").empty();
                    // Add the new options from the API response
                    data.districts.forEach(function (district) {
                        $("#district").append(`<option id="${district.code}" value="${district.name}">${district.name}</option>`);
                    });
                    // Initialize the select2 plugin
                    $("#district").select2({
                        searchInputPlaceholder: "Nhập tên Quận/Huyện",
                        "language": {
                            "noResults": function () {
                                return "Không tìm thấy kết quả nào";
                            }
                        },
                    });
                },
                error: function (error) {
                    console.error("Error loading districts:", error);
                }
            });
        }
        $("#cityOption").change(function () {
            const provinceCode = $(this).children("option:selected").attr("id");
            loadDistricts(provinceCode);
        });
        loadProvinces();
    </script>
}